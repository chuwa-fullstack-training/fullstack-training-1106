<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cool Home Page</title>
</head>
<body>
    <h1>Welcome to Nodejs tutorial</h1>
    <form action="/create-post" method="post" enctype="application/x-www-form-urlencoded">
        <input type="text" name="title">
        <input type="text" name="content">
        <input type="submit" value="submit">
    </form>

    <h2>Posted content</h2>
    <ul id="listItem"></ul>

    <div></div>
    <script>
        function getInputNames() {
            let saved_list = document.getElementById("listItem");
            saved_list.innerHTML = "";

            const url_params = new URLSearchParams(window.location.search);
            const new_title = url_params.get("title");
            const new_content = url_params.get("content");

            const existing_pair = JSON.parse(localStorage.getItem("UserInput")) || [];
            // save data in localStorage
            if (new_title || new_content) {
                existing_pair.push({ title: new_title, content: new_content });
                // localStorage.setItem("title", new_title);
                // localStorage.setItem("content", new_content);
                localStorage.setItem("UserInput", JSON.stringify(existing_pair));
            }
            
            // display data
            existing_pair.forEach(pair => {
                const list_item = document.createElement("li");
                list_item.textContent = "Title: " + pair.title + ", Content: " + pair.content;
                saved_list.appendChild(list_item);
            });

            if (saved_list.innerHTML === "") {
                saved_list.innerHTML = "<li>No data available yet.</li>";
            }
        }
        
        window.onload = function () {
            getInputNames();
        }
    </script>
</body>
</html>